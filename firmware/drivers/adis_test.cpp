#include "main.h"
#include "adis.hpp"

using namespace chibios_rt;

/*
 ******************************************************************************
 * DEFINES
 ******************************************************************************
 */

/*
 ******************************************************************************
 * EXTERNS
 ******************************************************************************
 */

/*
 ******************************************************************************
 * PROTOTYPES
 ******************************************************************************
 */

/*
 ******************************************************************************
 * GLOBAL VARIABLES
 ******************************************************************************
 */

adis_data_t adis_data;

/*
 ******************************************************************************
 ******************************************************************************
 * LOCAL FUNCTIONS
 ******************************************************************************
 ******************************************************************************
 */

/*
 ******************************************************************************
 * EXPORTED FUNCTIONS
 ******************************************************************************
 */
/**
 *
 */
void AdisTest(void) {

  osalDbgCheck(OSAL_SUCCESS == adis.start());

  while (TRUE) {
    osalDbgCheck(MSG_OK == adis.wait(MS2ST(200)));
    adis.get(&adis_data);
    osalDbgCheck(0 == adis_data.errors);
  }
}
