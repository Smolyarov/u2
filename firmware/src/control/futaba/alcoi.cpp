#include "main.h"
#include "alcoi.hpp"

using namespace chibios_rt;
using namespace control;

/*
 ******************************************************************************
 * DEFINES
 ******************************************************************************
 */

/*
 ******************************************************************************
 * EXTERNS
 ******************************************************************************
 */

/*
 ******************************************************************************
 * PROTOTYPES
 ******************************************************************************
 */

/*
 ******************************************************************************
 * GLOBAL VARIABLES
 ******************************************************************************
 */

/*
 ******************************************************************************
 ******************************************************************************
 * LOCAL FUNCTIONS
 ******************************************************************************
 ******************************************************************************
 */

/*
 ******************************************************************************
 * EXPORTED FUNCTIONS
 ******************************************************************************
 */
/**
 *
 */
void Alcoi::start(void) {
  ready = true;
}

/**
 *
 */
void Alcoi::stop(void) {
  ready = false;
}

/**
 *
 */
msg_t Alcoi::update(FutabaOutput &result, float dT) {
  (void)dT;

  osalDbgCheck(ready);

  result.ail = 0;
  result.ele = 0;
  result.rud = 0;
  result.thr = 0;

  result.man = ManualSwitch::semiauto;

  result.ol_ail = OverrideLevel::medium;
  result.ol_ele = OverrideLevel::medium;
  result.ol_rud = OverrideLevel::medium;
  result.ol_thr = OverrideLevel::medium;

  return MSG_OK;
}
