#include "main.h"
#include "mavchannel_serial.hpp"

/*
 ******************************************************************************
 * DEFINES
 ******************************************************************************
 */

/*
 ******************************************************************************
 * EXTERNS
 ******************************************************************************
 */

/*
 ******************************************************************************
 * PROTOTYPES
 ******************************************************************************
 */

/*
 ******************************************************************************
 * GLOBAL VARIABLES
 ******************************************************************************
 */

/*
 ******************************************************************************
 ******************************************************************************
 * LOCAL FUNCTIONS
 ******************************************************************************
 ******************************************************************************
 */

/*
 ******************************************************************************
 * EXPORTED FUNCTIONS
 ******************************************************************************
 */

/**
 *
 */
mavChannelSerial::mavChannelSerial(SerialDriver *sdp, const SerialConfig *ser_cfg) :
sdp(sdp),
ser_cfg(ser_cfg)
{
  chDbgCheck((NULL != sdp) && (NULL != ser_cfg));
}

/**
 *
 */
void mavChannelSerial::start(void){
  sdStart(sdp, ser_cfg);
}

/**
 *
 */
void mavChannelSerial::stop(void){
  sdStop(sdp);
}

/**
 *
 */
void mavChannelSerial::write(const uint8_t *buf, size_t len){
  sdWrite(sdp, buf, len);
}

/**
 *
 */
msg_t mavChannelSerial::getTimeout(systime_t time){
  return sdGetTimeout(sdp, time);
}

